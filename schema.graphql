#------------------------------------------------------------------------------
# Identity
#------------------------------------------------------------------------------
type Identity {
  id: ID!
  email: String!
  givenName: String!
  familyName: String!
  profilePicture: String
  roles: [String!]
  assignments: [IdentityAssignment!]
}

input CreateIdentity {
  id: ID!
  email: String!
  givenName: String!
  familyName: String!
  profilePicture: String
}

input UpdateIdentity {
  id: ID!
  email: String!
  givenName: String!
  familyName: String!
  profilePicture: String
}

#------------------------------------------------------------------------------
# Org
#------------------------------------------------------------------------------
type OrgProfile {
  id: ID!
  slug: String!
  name: String!
  lightIcon: String
  darkIcon: String
}

type Org {
  id: ID!
  slug: String!
  name: String!
  lightIcon: String
  darkIcon: String
  publicSignInEnabled: Boolean
  publicSupportEnabled: Boolean
}

input CreateOrgInput {
  slug: String!
  name: String!
}

input UpdateOrgInput {
  id: ID!
  name: String
  lightIcon: String
  darkIcon: String
}

#------------------------------------------------------------------------------
# IdentityAutoMapping
#------------------------------------------------------------------------------
type IdentityAutoMapping {
  orgId: ID!
  domain: String!
}

input CreateIdentityAutoMappingInput {
  orgId: ID!
  domain: String!
}

input UpdateIdentityAutoMappingInput {
  orgId: ID!
  domain: String!
}

input DeleteIdentityAutoMappingInput {
  orgId: ID!
  domain: String!
}

#------------------------------------------------------------------------------
# IdentityAssignment
#------------------------------------------------------------------------------
type IdentityAssignment {
  identityId: ID!
  orgId: ID!
  roles: [String!]
}

input CreateIdentityAssignmentInput {
  identityId: ID!
  orgId: ID!
  roles: [String!]!
}

input UpdateIdentityAssignmentInput {
  identityId: ID!
  orgId: ID!
  roles: [String!]!
}

#------------------------------------------------------------------------------
# Queries
#------------------------------------------------------------------------------
type Query {
  # Identity
  getIdentity(id: ID!): Identity

  # Org
  getOrgProfile(id: ID!): OrgProfile
  getOrg(id: ID!): Org
  findOrgBySlug(slug: String!): Org

  # IdentityAssignment
  getIdentityAssignment(identityId: ID!, orgId: ID!): IdentityAssignment
  findIdentityAssignmentsByIdentity(identityId: ID!): [IdentityAssignment!]
  findIdentityAssignmentsByOrg(orgId: ID!): [IdentityAssignment!]

  # IdentityAutoMapping
  getIdentityAutoMapping(orgId: ID!, domain: String!): IdentityAutoMapping
  findIdentityAutoMappingsByDomain(domain: String!): [IdentityAutoMapping!]
}

#------------------------------------------------------------------------------
# Mutations
#------------------------------------------------------------------------------
type Mutation {
  # Identity
  createIdentity(input: CreateIdentity!): Identity
  updateIdentity(input: UpdateIdentity!): Identity

  # Org
  createOrg(input: CreateOrgInput!): Org
  updateOrg(input: UpdateOrgInput!): Org

  # IdentityAssignment
  createIdentityAssignment(
    input: CreateIdentityAssignmentInput!
  ): IdentityAssignment
  updateIdentityAssignment(
    input: UpdateIdentityAssignmentInput!
  ): IdentityAssignment

  # IdentityAutoMapping
  createIdentityAutoMapping(
    input: CreateIdentityAutoMappingInput!
  ): IdentityAutoMapping
  updateIdentityAutoMapping(
    input: UpdateIdentityAutoMappingInput!
  ): IdentityAutoMapping
  deleteIdentityAutoMapping(
    input: DeleteIdentityAutoMappingInput!
  ): IdentityAutoMapping
}
